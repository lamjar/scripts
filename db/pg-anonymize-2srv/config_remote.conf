################################################################################
# Configuration pour pg_anonymize_dump.sh
# Exemple: Source et Target sur des serveurs différents
################################################################################

# === CONFIGURATION SOURCE ===
SOURCE_HOST="192.168.1.10"
SOURCE_PORT="5432"
SOURCE_DB="production_db"
SOURCE_SCHEMA="public"
SOURCE_USER="postgres"
SOURCE_PASSWORD=""

# === CONFIGURATION TARGET ===
TARGET_HOST="192.168.1.20"
TARGET_PORT="5432"
TARGET_DB="staging_db"
TARGET_SCHEMA="public"
TARGET_USER="postgres"
TARGET_PASSWORD=""

# === CONFIGURATION SERVEURS ===
# Le script s'exécute sur le serveur source, et transfère vers le target
SOURCE_SERVER=""
TARGET_SERVER="user@192.168.1.20"  # SSH vers le serveur target

# === RÉPERTOIRES ===
DUMP_DIR="/var/backups/pg_dumps"
TRANSFER_METHOD="rsync"  # rsync recommandé pour les gros dumps

# === RÈGLES D'ANONYMISATION ===
ANONYMIZE_RULES_FILE="/etc/pg_anonymize/rules.json"

# === OPTIONS ===
AUTO_DETECT_PII=true
KEEP_DUMP_AFTER_RESTORE=true  # Conserver une copie du dump
BACKUP_TARGET_BEFORE=true
PARALLEL_JOBS=8  # Plus de CPU disponible

# === OPTIONS DE DUMP ===
DUMP_FORMAT="directory"  # Format directory pour de meilleures performances
COMPRESSION_LEVEL=4  # Compression plus rapide
